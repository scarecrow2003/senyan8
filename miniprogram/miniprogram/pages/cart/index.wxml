<navigation-bar title="è´­ç‰©è½¦" back="{{false}}" color="black" background="#FFF"></navigation-bar>
<view class="cart-page">
  <block wx:if="{{cart.length > 0}}">
    <view class="address" bindtap="addAddress">
      <block wx:if="{{selectedAddress}}">
        <view class="cart-address">
          <text class="label">æ”¶è´§åœ°å€:</text>
          <text class="value">{{selectedAddress.address}}</text>
        </view>
      </block>
      <block wx:else>
        <button>æ·»åŠ æ”¶è´§åœ°å€</button>
      </block>
    </view>
    <block wx:for="{{cart}}" wx:key="id">
      <view class="cart-item horizontal">
        <image src="{{item.url}}" class="cart-image" mode="aspectFill" />
        <view class="cart-info vertical">
          <view class="horizontal">
            <text class="cart-name">{{item.name}}</text>
            <text class="price">S${{item.price}}</text>
          </view>
          <view class="qty-controls horizontal">
            <button data-id="{{item.id}}" bindtap="decreaseQty">-</button>
            <text class="qty-text">{{item.quantity}}</text>
            <button data-id="{{item.id}}" bindtap="increaseQty">+</button>
          </view>
        </view>
      </view>
    </block>

    <view class="cart-summary">
      <text>æ€»ä»·: S${{totalPrice}}</text>
    </view>

    <button class="checkout-btn" bindtap="goToCheckout">æ”¯ä»˜</button>

    <!-- <block wx:else>
      <button open-type="getPhoneNumber" class="checkout-btn" bindgetphonenumber="onGetPhone">æ”¯ä»˜</button>
    </block> -->
    <button class="clear-btn" bindtap="clearCart">ğŸ—‘ï¸ æ¸…ç©ºè´­ç‰©è½¦</button>
  </block>
  <block wx:else>
    <view class="empty">ğŸ›’ æ‚¨çš„è´­ç‰©è½¦æ˜¯ç©ºçš„</view>
  </block>
  <!-- Modal -->
  <login-modal showModal="{{showModal}}" bind:closemodal="onCloseModal" bind:setuserinfo="setUserInfo"></login-modal>
  <!-- <view wx:if="{{showModal}}" class="modal-mask">
    <view class="modal">
      <block wx:if="{{userInfo.name}}">
        <input type="text" value="{{userInfo.name}}" bindinput="onNameInput" class="input-box"/>
      </block>
      <block wx:else>
        <button bindtap="getUserProfile">è·å–ç”¨æˆ·ä¿¡æ¯</button>
      </block>
      <block wx:if="{{userInfo.phone}}">
        <view>{{userInfo.phone}}</view>
      </block>
      <block wx:else>
        <button open-type="getPhoneNumber" bindgetphonenumber="onGetPhone">è·å–æ‰‹æœºå·ç </button>
      </block>
      <view class="modal-actions">
        <button size="mini" bindtap="cancel">å–æ¶ˆ</button>
        <button size="mini" type="primary" bindtap="confirm" disabled="{{!userInfo.name || !userInfo.phone || !userInfo.openid}}">ç¡®å®š</button>
      </view>
    </view>
  </view> -->
</view>